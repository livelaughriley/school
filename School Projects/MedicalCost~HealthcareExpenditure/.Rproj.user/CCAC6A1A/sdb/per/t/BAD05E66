{
    "collab_server" : "",
    "contents" : "/*\n * fakemysql.h --\n *\n *\tFake definitions of the MySQL API sufficient to build tdbc::mysql\n *\twithout having an MySQL installation on the build system. This file\n *\tcomprises only data type, constant and function definitions.\n *\n * The programmers of this file believe that it contains material not\n * subject to copyright under the doctrines of scenes a faire and\n * of merger of idea and expression. Accordingly, this file is in the\n * public domain.\n *\n *-----------------------------------------------------------------------------\n */\n\n#ifndef FAKEMYSQL_H_INCLUDED\n#define FAKEMYSQL_H_INCLUDED\n\n#include <stddef.h>\n\n#ifndef MODULE_SCOPE\n#define MODULE_SCOPE extern\n#endif\n\nMODULE_SCOPE Tcl_LoadHandle MysqlInitStubs(Tcl_Interp*);\n\n#ifdef _WIN32\n#define STDCALL __stdcall\n#else\n#define STDCALL /* nothing */\n#endif\n\nenum enum_field_types {\n    MYSQL_TYPE_DECIMAL=0,\n    MYSQL_TYPE_TINY=1,\n    MYSQL_TYPE_SHORT=2,\n    MYSQL_TYPE_LONG=3,\n    MYSQL_TYPE_FLOAT=4,\n    MYSQL_TYPE_DOUBLE=5,\n    MYSQL_TYPE_NULL=6,\n    MYSQL_TYPE_TIMESTAMP=7,\n    MYSQL_TYPE_LONGLONG=8,\n    MYSQL_TYPE_INT24=9,\n    MYSQL_TYPE_DATE=10,\n    MYSQL_TYPE_TIME=11,\n    MYSQL_TYPE_DATETIME=12,\n    MYSQL_TYPE_YEAR=13,\n    MYSQL_TYPE_NEWDATE=14,\n    MYSQL_TYPE_VARCHAR=15,\n    MYSQL_TYPE_BIT=16,\n    MYSQL_TYPE_NEWDECIMAL=246,\n    MYSQL_TYPE_ENUM=247,\n    MYSQL_TYPE_SET=248,\n    MYSQL_TYPE_TINY_BLOB=249,\n    MYSQL_TYPE_MEDIUM_BLOB=250,\n    MYSQL_TYPE_LONG_BLOB=251,\n    MYSQL_TYPE_BLOB=252,\n    MYSQL_TYPE_VAR_STRING=253,\n    MYSQL_TYPE_STRING=254,\n    MYSQL_TYPE_GEOMETRY=255\n};\n\nenum mysql_option {\n    MYSQL_SET_CHARSET_NAME=7,\n};\n\nenum mysql_status {\n    MYSQL_STATUS_READY=0,\n};\n\n#define CLIENT_COMPRESS \t32\n#define CLIENT_INTERACTIVE 1024\n#define MYSQL_DATA_TRUNCATED 101\n#define MYSQL_ERRMSG_SIZE 512\n#define MYSQL_NO_DATA 100\n#define SCRAMBLE_LENGTH 20\n#define SQLSTATE_LENGTH 5\n\ntypedef struct st_list LIST;\ntypedef struct st_mem_root MEM_ROOT;\ntypedef struct st_mysql MYSQL;\ntypedef struct st_mysql_bind MYSQL_BIND;\ntypedef struct st_mysql_field MYSQL_FIELD;\ntypedef struct st_mysql_res MYSQL_RES;\ntypedef char** MYSQL_ROW;\ntypedef struct st_mysql_stmt MYSQL_STMT;\ntypedef char my_bool;\n#ifndef Socket_defined\ntypedef int\tmy_socket;\n#define INVALID_SOCKET -1\n#endif\ntypedef Tcl_WideUInt my_ulonglong;\ntypedef struct st_net NET;\ntypedef struct st_used_mem USED_MEM;\ntypedef struct st_vio Vio;\n\nstruct st_mem_root {\n  USED_MEM *free;\n  USED_MEM *used;\n  USED_MEM *pre_alloc;\n  size_t min_malloc;\n  size_t block_size;\n  unsigned int block_num;\n  unsigned int first_block_usage;\n  void (*error_handler)(void);\n};\n\nstruct st_mysql_options {\n    unsigned int connect_timeout;\n    unsigned int read_timeout;\n    unsigned int write_timeout;\n    unsigned int port;\n    unsigned int protocol;\n    unsigned long client_flag;\n    char *host;\n    char *user;\n    char *password;\n    char *unix_socket;\n    char *db;\n    struct st_dynamic_array *init_commands;\n    char *my_cnf_file;\n    char *my_cnf_group;\n    char *charset_dir;\n    char *charset_name;\n    char *ssl_key;\n    char *ssl_cert;\n    char *ssl_ca;\n    char *ssl_capath;\n    char *ssl_cipher;\n    char *shared_memory_base_name;\n    unsigned long max_allowed_packet;\n    my_bool use_ssl;\n    my_bool compress,named_pipe;\n    my_bool rpl_probe;\n    my_bool rpl_parse;\n    my_bool no_master_reads;\n#if !defined(CHECK_EMBEDDED_DIFFERENCES) || defined(EMBEDDED_LIBRARY)\n    my_bool separate_thread;\n#endif\n    enum mysql_option methods_to_use;\n    char *client_ip;\n    my_bool secure_auth;\n    my_bool report_data_truncation;\n    int (*local_infile_init)(void **, const char *, void *);\n    int (*local_infile_read)(void *, char *, unsigned int);\n    void (*local_infile_end)(void *);\n    int (*local_infile_error)(void *, char *, unsigned int);\n    void *local_infile_userdata;\n    void *extension;\n};\n\nstruct st_net {\n#if !defined(CHECK_EMBEDDED_DIFFERENCES) || !defined(EMBEDDED_LIBRARY)\n    Vio *vio;\n    unsigned char *buff;\n    unsigned char *buff_end;\n    unsigned char *write_pos;\n    unsigned char *read_pos;\n    my_socket fd;\n    unsigned long remain_in_buf;\n    unsigned long length;\n    unsigned long buf_length;\n    unsigned long where_b;\n    unsigned long max_packet;\n    unsigned long max_packet_size;\n    unsigned int pkt_nr;\n    unsigned int compress_pkt_nr;\n    unsigned int write_timeout;\n    unsigned int read_timeout;\n    unsigned int retry_count;\n    int fcntl;\n    unsigned int *return_status;\n    unsigned char reading_or_writing;\n    char save_char;\n    my_bool unused0;\n    my_bool unused;\n    my_bool compress;\n    my_bool unused1;\n#endif\n    unsigned char *query_cache_query;\n    unsigned int last_errno;\n    unsigned char error;\n    my_bool unused2;\n    my_bool return_errno;\n    char last_error[MYSQL_ERRMSG_SIZE];\n    char sqlstate[SQLSTATE_LENGTH+1];\n    void *extension;\n#if defined(MYSQL_SERVER) && !defined(EMBEDDED_LIBRARY)\n    my_bool skip_big_packet;\n#endif\n};\n\n/*\n * st_mysql differs between 5.0 and 5.1, but the 5.0 version is a\n * strict subset, we don't use any of the 5.1 fields, and we don't\n * ever allocate the structure ourselves.\n */\n\nstruct st_mysql {\n    NET net;\n    unsigned char *connector_fd;\n    char *host;\n    char *user;\n    char *passwd;\n    char *unix_socket;\n    char *server_version;\n    char *host_info;\n    char *info;\n    char *db;\n    struct charset_info_st *charset;\n    MYSQL_FIELD *fields;\n    MEM_ROOT field_alloc;\n    my_ulonglong affected_rows;\n    my_ulonglong insert_id;\n    my_ulonglong extra_info;\n    unsigned long thread_id;\n    unsigned long packet_length;\n    unsigned int port;\n    unsigned long client_flag;\n    unsigned long server_capabilities;\n    unsigned int protocol_version;\n    unsigned int field_count;\n    unsigned int server_status;\n    unsigned int server_language;\n    unsigned int warning_count;\n    struct st_mysql_options options;\n    enum mysql_status status;\n    my_bool free_me;\n    my_bool reconnect;\n    char scramble[SCRAMBLE_LENGTH+1];\n    my_bool rpl_pivot;\n    struct st_mysql *master;\n    struct st_mysql *next_slave;\n    struct st_mysql* last_used_slave;\n    struct st_mysql* last_used_con;\n    LIST  *stmts;\n    const struct st_mysql_methods *methods;\n    void *thd;\n    my_bool *unbuffered_fetch_owner;\n    char *info_buffer;\n};\n\n/*\n * There are different version of the MYSQL_BIND structure before and after\n * MySQL 5.1. We go after the fields of the structure using accessor functions\n * so that the code in this file is compatible with both versions.\n */\n\nstruct st_mysql_bind_51 {\t/* Post-5.1 */\n    unsigned long* length;\n    my_bool* is_null;\n    void* buffer;\n    my_bool* error;\n    unsigned char* row_ptr;\n    void (*store_param_func)(NET* net, MYSQL_BIND* param);\n    void (*fetch_result)(MYSQL_BIND*, MYSQL_FIELD*, unsigned char**);\n    void (*skip_result)(MYSQL_BIND*, MYSQL_FIELD*, unsigned char**);\n    unsigned long buffer_length;\n    unsigned long offset;\n    unsigned long length_value;\n    unsigned int param_number;\n    unsigned int pack_length;\n    enum enum_field_types buffer_type;\n    my_bool error_value;\n    my_bool is_unsigned;\n    my_bool long_data_used;\n    my_bool is_null_value;\n    void* extension;\n};\n\nstruct st_mysql_bind_50 {\t/* Pre-5.1 */\n    unsigned long* length;\n    my_bool* is_null;\n    void* buffer;\n    my_bool* error;\n    enum enum_field_types buffer_type;\n    unsigned long buffer_length;\n    unsigned char* row_ptr;\n    unsigned long offset;\n    unsigned long length_value;\n    unsigned int param_number;\n    unsigned int pack_length;\n    my_bool error_value;\n    my_bool is_unsigned;\n    my_bool long_data_used;\n    my_bool is_null_value;\n    void (*store_param_func)(NET* net, MYSQL_BIND* param);\n    void (*fetch_result)(MYSQL_BIND*, MYSQL_FIELD*, unsigned char**);\n    void (*skip_result)(MYSQL_BIND*, MYSQL_FIELD*, unsigned char**);\n};\n\n/*\n * There are also different versions of the MYSQL_FIELD structure; fortunately,\n * the 5.1 version is a strict extension of the 5.0 version.\n */\n\nstruct st_mysql_field {\n    char* name;\n    char *org_name;\n    char* table;\n    char* org_table;\n    char* db;\n    char* catalog;\n    char* def;\n    unsigned long length;\n    unsigned long max_length;\n    unsigned int name_length;\n    unsigned int org_name_length;\n    unsigned int table_length;\n    unsigned int org_table_length;\n    unsigned int db_length;\n    unsigned int catalog_length;\n    unsigned int def_length;\n    unsigned int flags;\n    unsigned int decimals;\n    unsigned int charsetnr;\n    enum enum_field_types type;\n};\nstruct st_mysql_field_50 {\n    struct st_mysql_field field;\n};\nstruct st_mysql_field_51 {\n    struct st_mysql_field field;\n    void* extension;\n};\n#define NOT_NULL_FLAG 1\n\n#define IS_NUM(t)\t((t) <= MYSQL_TYPE_INT24 || (t) == MYSQL_TYPE_YEAR || (t) == MYSQL_TYPE_NEWDECIMAL)\n\n#define mysql_library_init mysql_server_init\n#define mysql_library_end mysql_server_end\n\n#include \"mysqlStubs.h\"\n\n#endif /* not FAKEMYSQL_H_INCLUDED */\n",
    "created" : 1511468014961.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1232371295",
    "id" : "BAD05E66",
    "lastKnownWriteTime" : 1490216507,
    "last_content_update" : 1490216507,
    "path" : "/usr/local/include/fakemysql.h",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "h"
}